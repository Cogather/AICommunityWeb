# Node.js 和 npm 安装配置指南

## 📋 目录
1. [快速检查](#快速检查)
2. [安装 Node.js](#安装-nodejs)
3. [验证安装](#验证安装)
4. [配置 npm 镜像源](#配置-npm-镜像源)
5. [常见问题](#常见问题)

---

## 🚀 快速检查

在 PowerShell 中运行以下命令检查是否已安装：

```powershell
node -v
npm -v
```

如果显示版本号，说明已安装，可以跳过安装步骤。

---

## 📥 安装 Node.js

### 方法 1: 官方安装包（推荐）

1. **访问官网**
   - 打开浏览器访问：https://nodejs.org/zh-cn
   - 点击绿色的 **"LTS（长期支持）"** 按钮下载

2. **运行安装程序**
   - 双击下载的 `.msi` 文件
   - 点击 "下一步" 直到完成
   - **重要**: 保持所有默认选项（包括添加到 PATH）

3. **重启终端**
   - 关闭所有 PowerShell/CMD 窗口
   - 重新打开终端
   - 运行 `node -v` 验证

### 方法 2: 使用 winget（Windows 10/11）

在 PowerShell 中运行：

```powershell
winget install OpenJS.NodeJS.LTS
```

安装完成后重启终端。

### 方法 3: 使用 Chocolatey（如果已安装）

在管理员 PowerShell 中运行：

```powershell
choco install nodejs-lts
```

---

## ✅ 验证安装

安装完成后，在新的终端窗口中运行：

```powershell
node -v
npm -v
```

应该看到类似输出：
```
v20.11.0
10.2.4
```

---

## 🌐 配置 npm 镜像源（推荐）

为了加快下载速度，建议配置国内镜像源：

### 使用淘宝镜像（推荐）

```powershell
npm config set registry https://registry.npmmirror.com
npm config set disturl https://npmmirror.com/mirrors/node
npm config set electron_mirror https://npmmirror.com/mirrors/electron/
```

### 验证配置

```powershell
npm config get registry
```

应该显示：`https://registry.npmmirror.com/`

### 恢复官方源（如果需要）

```powershell
npm config set registry https://registry.npmjs.org/
```

---

## 🔧 使用自动配置脚本

项目根目录下有一个 `setup-node.ps1` 脚本，可以自动检查和配置：

1. **以管理员身份打开 PowerShell**
2. **导航到项目目录**：
   ```powershell
   cd "d:\cursor project\AICommunityWeb"
   ```
3. **运行脚本**：
   ```powershell
   .\setup-node.ps1
   ```

脚本会：
- ✅ 检查 Node.js 和 npm 是否已安装
- ✅ 检查环境变量配置
- ✅ 提供安装指导
- ✅ 可选配置 npm 镜像源

---

## ❓ 常见问题

### Q1: 安装后仍然提示找不到 node 或 npm

**解决方案**：
1. 重启电脑（确保环境变量生效）
2. 检查安装路径是否在 PATH 中：
   ```powershell
   $env:Path -split ';' | Select-String nodejs
   ```
3. 手动添加到 PATH（如果未自动添加）：
   - 按 `Win + R`，输入 `SystemPropertiesAdvanced`
   - 点击"环境变量"
   - 在"系统变量"中找到 `Path`，点击"编辑"
   - 添加：`C:\Program Files\nodejs`
   - 确定后重启终端

### Q2: npm install 很慢或失败

**解决方案**：
1. 配置国内镜像源（见上方"配置 npm 镜像源"）
2. 使用 cnpm：
   ```powershell
   npm install -g cnpm --registry=https://registry.npmmirror.com
   cnpm install
   ```

### Q3: 权限错误

**解决方案**：
- 以管理员身份运行 PowerShell
- 或使用 `--legacy-peer-deps` 参数：
  ```powershell
  npm install --legacy-peer-deps
  ```

### Q4: 版本不兼容

**要求**：
- Node.js >= 16.0.0
- npm >= 7.0.0

检查版本：
```powershell
node -v
npm -v
```

---

## 📝 安装完成后的下一步

1. **安装项目依赖**：
   ```powershell
   cd "d:\cursor project\AICommunityWeb"
   npm install
   ```

2. **启动开发服务器**：
   ```powershell
   npm run dev
   ```

3. **浏览器访问**：
   - 项目会自动在 `http://localhost:3000` 启动

---

## 🆘 需要帮助？

如果遇到问题：
1. 检查 Node.js 和 npm 版本是否符合要求
2. 查看错误信息，搜索解决方案
3. 尝试删除 `node_modules` 和 `package-lock.json` 后重新安装






