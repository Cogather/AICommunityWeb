<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aicommunity.mapper.RecommendedCoverMapper">

    <resultMap id="CoverItemResultMap" type="com.aicommunity.dto.RecommendedCoversResponse$CoverItem">
        <id column="id" property="id"/>
        <result column="url" property="url"/>
        <result column="thumbnail" property="thumbnail"/>
        <result column="order" property="order"/>
    </resultMap>

    <select id="selectAll" resultMap="CoverItemResultMap">
        SELECT * FROM recommended_covers ORDER BY `order` ASC, id ASC
    </select>

    <delete id="deleteAll">
        DELETE FROM recommended_covers
    </delete>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO recommended_covers (url, thumbnail, `order`, create_time)
        VALUES (#{url}, #{thumbnail}, #{order}, NOW())
    </insert>

</mapper>
