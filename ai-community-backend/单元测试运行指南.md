# 单元测试运行指南

## 快速开始

### 1. 运行所有测试
```bash
mvn test
```

### 2. 运行指定测试类
```bash
mvn test -Dtest=AuthServiceImplTest
```

### 3. 运行指定测试方法
```bash
mvn test -Dtest=AuthServiceImplTest#testLoginSuccess
```

### 4. 生成测试覆盖率报告
```bash
mvn test jacoco:report
```

## 测试类列表

### Service层测试
- ✅ `AuthServiceImplTest` - 认证服务测试
- ✅ `UserServiceImplTest` - 用户服务测试
- ✅ `PostServiceImplTest` - 帖子服务测试
- ✅ `CommentServiceImplTest` - 评论服务测试
- ✅ `ActivityServiceImplTest` - 活动服务测试

### Controller层测试
- ✅ `AuthControllerTest` - 认证控制器测试
- ✅ `PostControllerTest` - 帖子控制器测试

### Util层测试
- ✅ `JwtUtilTest` - JWT工具类测试

### Common层测试
- ✅ `ResultTest` - 统一响应类测试
- ✅ `PageQueryTest` - 分页查询参数测试
- ✅ `PageResultTest` - 分页结果测试
- ✅ `BusinessExceptionTest` - 业务异常测试

## 测试覆盖率目标

- **目标覆盖率**: 80%以上
- **关键业务逻辑**: 100%覆盖
- **工具类**: 100%覆盖

## 常见问题

### Q1: 测试运行失败，提示找不到类？
A: 确保已执行 `mvn clean compile test-compile`

### Q2: PowerMock静态方法Mock失败？
A: 检查 `@PrepareForTest` 注解是否包含需要Mock的类

### Q3: 测试中如何Mock HttpServletRequest？
A: 使用 `@Mock` 注解Mock HttpServletRequest，然后设置Header返回值

### Q4: 如何测试私有方法？
A: 使用PowerMock的 `Whitebox.invokeMethod()` 或 `Whitebox.setInternalState()`

---

**创建时间**: 2024-01-09
