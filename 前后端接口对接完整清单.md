# 前后端接口对接完整清单

## 接口统计总览

- **后端总接口数**: 79个
- **前端已对接**: 约30个
- **前端未对接**: 约49个
- **对接完成度**: 约38%

## ⚠️ 为什么有些接口没有对接？

**主要原因**：前端页面UI已经完成，但很多功能还在使用**模拟数据（Mock Data）**或**localStorage**，没有真正调用后端API。

### 发现的问题：

1. **PostDetailView.vue** - 帖子详情页
   - 代码中有注释：`// 这里应该调用API获取帖子详情`
   - 实际使用的是模拟数据：`postData.value = { ...模拟数据 }`

2. **PostCreateView.vue** - 帖子创建页
   - 代码中有注释：`// 这里应该调用API发布帖子`
   - 实际只是模拟延迟：`await new Promise(resolve => setTimeout(resolve, 1000))`

3. **ActivityDetailView.vue** - 活动详情页
   - 代码中有注释：`// 这里应该调用API获取活动数据`
   - 实际从localStorage读取：`localStorage.getItem('admin_activities')`

4. **ProfileView.vue** - 个人中心页
   - 代码中有注释：`// 这里应该调用API获取用户信息`
   - 实际使用mock函数：`getUserAvatar(userName)`、`getUserBio(userName)`

5. **MessageListView.vue** - 消息列表页
   - 使用的是 `utils/message.ts`，但该文件使用的是**localStorage**存储，不是真实API

6. **AgentView.vue** - 扶摇Agent页面
   - 代码中有注释：`// 模拟API调用：GET /api/tools/-1/owner`
   - 实际从localStorage读取：`localStorage.getItem('tool_owners')`

7. **UsersView.vue** - AI使用达人页面
   - 代码中有注释：`// --- 模拟数据 (HonorList 保持不变) ---`
   - 使用的是硬编码的mock数据

### 解决方案：

需要创建对应的API文件，并在Vue组件中替换掉所有模拟数据调用，改为真实API调用。

---

## 一、已对接的接口 ✅

### 1. 首页相关接口（2/2）✅
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/home/carousel | `home.ts` - `getCarousel()` | ✅ 已对接 |
| GET /api/home/honor | `home.ts` - `getHonor()` | ✅ 已对接 |

### 2. 帖子相关接口（3/12）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/posts | `practices.ts` - `getPosts()` | ✅ 已对接 |
| GET /api/posts/hot | `practices.ts` - `getHotPosts()` | ✅ 已对接 |
| GET /api/posts/{id}/comments | ❌ 未对接 | ⚠️ |
| POST /api/posts/{id}/comments | ❌ 未对接 | ⚠️ |
| GET /api/posts/{id} | ❌ 未对接 | ⚠️ |
| POST /api/posts | ❌ 未对接 | ⚠️ |
| PUT /api/posts/{id} | ❌ 未对接 | ⚠️ |
| DELETE /api/posts/{id} | ❌ 未对接 | ⚠️ |
| POST /api/posts/{id}/like | ❌ 未对接 | ⚠️ |
| POST /api/posts/{id}/collect | ❌ 未对接 | ⚠️ |
| GET /api/posts/recommended-covers | ❌ 未对接 | ⚠️ |
| POST /api/posts/draft | ❌ 未对接 | ⚠️ |

### 3. 标签相关接口（1/1）✅
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/tags | `practices.ts` - `getTags()` | ✅ 已对接 |

### 4. 部门相关接口（1/1）✅
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/departments/stats | `practices.ts` - `getDepartments()` | ✅ 已对接 |

### 5. 用户贡献者相关接口（1/1）✅
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/users/top-contributors | `practices.ts` - `getTopContributors()` | ✅ 已对接 |

### 6. 工具相关接口（1/3）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/tools | `home.ts` - `getTools()` | ✅ 已对接 |
| GET /api/tools/{id} | ❌ 未对接 | ⚠️ |
| GET /api/tools/{id}/owner | ❌ 未对接 | ⚠️ |

### 7. 奖项相关接口（1/2）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/awards | `admin.ts` - `getAwardsList()` | ✅ 已对接 |
| GET /api/awards/{id}/rules | ❌ 未对接 | ⚠️ |

### 8. 管理后台接口（15/23）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/admin/home/carousel | `admin.ts` - `getCarouselConfig()` | ✅ 已对接 |
| PUT /api/admin/home/carousel | `admin.ts` - `saveCarouselConfig()` | ✅ 已对接 |
| GET /api/admin/home/honor-banner | `admin.ts` - `getHonorBannerConfig()` | ✅ 已对接 |
| PUT /api/admin/home/honor-banner | `admin.ts` - `saveHonorBannerConfig()` | ✅ 已对接 |
| GET /api/admin/home/honor-awards | `admin.ts` - `getHonorAwardsConfig()` | ✅ 已对接 |
| PUT /api/admin/home/honor-awards | `admin.ts` - `saveHonorAwardsConfig()` | ✅ 已对接 |
| GET /api/admin/tools | `admin.ts` - `getToolsConfig()` | ✅ 已对接 |
| PUT /api/admin/tools | `admin.ts` - `saveToolsConfig()` | ✅ 已对接 |
| GET /api/admin/users/search | `admin.ts` - `searchUsers()` | ✅ 已对接 |
| GET /api/admin/users | `admin.ts` - `getUsersList()` | ✅ 已对接 |
| POST /api/admin/users/{userId}/role | `admin.ts` - `addUserRole()` | ✅ 已对接 |
| DELETE /api/admin/users/{userId}/role | `admin.ts` - `removeUserRole()` | ✅ 已对接 |
| GET /api/admin/honors/recommended-winners | `admin.ts` - `getRecommendedWinners()` | ✅ 已对接 |
| POST /api/admin/honors | `admin.ts` - `setUserAward()` | ✅ 已对接 |
| DELETE /api/admin/honors/{id} | `admin.ts` - `cancelUserAward()` | ✅ 已对接 |
| POST /api/admin/upload/image | `admin.ts` - `uploadImage()` | ✅ 已对接 |
| GET /api/admin/home/news | ❌ 未对接 | ⚠️ |
| PUT /api/admin/home/news | ❌ 未对接 | ⚠️ |
| GET /api/admin/agent/featured-post | ❌ 未对接 | ⚠️ |
| PUT /api/admin/agent/featured-post | ❌ 未对接 | ⚠️ |
| GET /api/admin/posts/recommended-covers | ❌ 未对接 | ⚠️ |
| PUT /api/admin/posts/recommended-covers | ❌ 未对接 | ⚠️ |
| GET /api/admin/users/awards | `admin.ts` - `getPersonalAwardsConfig()` | ⚠️ 后端未实现 |
| PUT /api/admin/users/awards | `admin.ts` - `savePersonalAwardsConfig()` | ⚠️ 后端未实现 |
| GET /api/admin/users/winners | `admin.ts` - `getWinnersConfig()` | ⚠️ 后端未实现 |
| PUT /api/admin/users/winners | `admin.ts` - `saveWinnersConfig()` | ⚠️ 后端未实现 |
| GET /api/admin/users/team-awards | `admin.ts` - `getTeamAwardsConfig()` | ⚠️ 后端未实现 |
| PUT /api/admin/users/team-awards | `admin.ts` - `saveTeamAwardsConfig()` | ⚠️ 后端未实现 |

---

## 二、未对接的接口 ❌

### 1. 用户认证与个人信息（0/2）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| POST /api/auth/login | ❌ 未对接 | ❌ |
| POST /api/auth/logout | ❌ 未对接 | ❌ |

### 2. 用户相关接口（0/10）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/user/current | ❌ 未对接 | ❌ |
| GET /api/user/points/calculate | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/profile | ❌ 未对接 | ❌ |
| GET /api/user/profile?name=xxx | ❌ 未对接 | ❌ |
| PUT /api/user/profile | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/posts | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/favorites | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/comments | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/activities | ❌ 未对接 | ❌ |
| GET /api/user/{userId}/activities/created | ❌ 未对接 | ❌ |

### 3. 帖子相关接口（9/12）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/posts/{id} | ❌ 未对接 | ❌ |
| POST /api/posts | ❌ 未对接 | ❌ |
| PUT /api/posts/{id} | ❌ 未对接 | ❌ |
| DELETE /api/posts/{id} | ❌ 未对接 | ❌ |
| POST /api/posts/{id}/like | ❌ 未对接 | ❌ |
| POST /api/posts/{id}/collect | ❌ 未对接 | ❌ |
| GET /api/posts/recommended-covers | ❌ 未对接 | ❌ |
| POST /api/posts/draft | ❌ 未对接 | ❌ |
| GET /api/posts/{id}/comments | ❌ 未对接 | ❌ |
| POST /api/posts/{id}/comments | ❌ 未对接 | ❌ |

### 4. 评论相关接口（0/3）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| POST /api/comments/{id}/like | ❌ 未对接 | ❌ |
| PUT /api/comments/{id} | ❌ 未对接 | ❌ |
| DELETE /api/comments/{id} | ❌ 未对接 | ❌ |

### 5. 回复相关接口（0/1）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| DELETE /api/replies/{id} | ❌ 未对接 | ❌ |

### 6. 活动相关接口（0/8）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/activities | ❌ 未对接 | ❌ |
| GET /api/activities/{id} | ❌ 未对接 | ❌ |
| POST /api/activities | ❌ 未对接 | ❌ |
| PUT /api/activities/{id} | ❌ 未对接 | ❌ |
| DELETE /api/activities/{id} | ❌ 未对接 | ❌ |
| POST /api/activities/{id}/register | ❌ 未对接 | ❌ |
| DELETE /api/activities/{id}/register | ❌ 未对接 | ❌ |
| GET /api/activities/{id}/registrations | ❌ 未对接 | ❌ |

### 7. 荣誉相关接口（0/4）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/honors | ❌ 未对接 | ❌ |
| GET /api/honors/influence | ❌ 未对接 | ❌ |
| GET /api/honors/top-users | ❌ 未对接 | ❌ |
| POST /api/honors/{id}/flower | ❌ 未对接 | ❌ |

### 8. 工具相关接口（2/3）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/tools/{id} | ❌ 未对接 | ❌ |
| GET /api/tools/{id}/owner | ❌ 未对接 | ❌ |

### 9. 奖项相关接口（1/2）⚠️
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/awards/{id}/rules | ❌ 未对接 | ❌ |

### 10. 扶摇Agent应用相关接口（0/1）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/agent/featured-post | ❌ 未对接 | ❌ |

### 11. 消息相关接口（0/5）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/messages | ❌ 未对接 | ❌ |
| PUT /api/messages/{id}/read | ❌ 未对接 | ❌ |
| PUT /api/messages/read-all | ❌ 未对接 | ❌ |
| DELETE /api/messages/{id} | ❌ 未对接 | ❌ |
| GET /api/messages/unread-count | ❌ 未对接 | ❌ |

### 12. 团队荣誉相关接口（0/2）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/team-awards | `users.ts` - `getTeamAwards()` | ⚠️ 后端未实现 |
| GET /api/team-awards/{id} | `users.ts` - `getTeamAwardDetail()` | ⚠️ 后端未实现 |

### 13. 首页AI优秀实践接口（0/1）❌
| 后端接口 | 前端API | 状态 |
|---------|---------|------|
| GET /api/home/practices | `home.ts` - `getPractices()` | ⚠️ 后端未实现 |

---

## 三、接口对接统计

### 按模块统计

| 模块 | 后端接口数 | 前端已对接 | 未对接 | 完成度 |
|------|-----------|----------|--------|--------|
| 用户认证 | 2 | 0 | 2 | 0% ❌ |
| 用户管理 | 10 | 0 | 10 | 0% ❌ |
| 首页 | 2 | 2 | 0 | 100% ✅ |
| 帖子 | 12 | 3 | 9 | 25% ⚠️ |
| 评论 | 3 | 0 | 3 | 0% ❌ |
| 回复 | 1 | 0 | 1 | 0% ❌ |
| 活动 | 8 | 0 | 8 | 0% ❌ |
| 荣誉 | 4 | 0 | 4 | 0% ❌ |
| 工具 | 3 | 1 | 2 | 33% ⚠️ |
| 标签 | 1 | 1 | 0 | 100% ✅ |
| 部门 | 1 | 1 | 0 | 100% ✅ |
| 贡献者 | 1 | 1 | 0 | 100% ✅ |
| 奖项 | 2 | 1 | 1 | 50% ⚠️ |
| 扶摇Agent | 1 | 0 | 1 | 0% ❌ |
| 消息 | 5 | 0 | 5 | 0% ❌ |
| 管理后台 | 23 | 15 | 8 | 65% ⚠️ |
| 团队荣誉 | 2 | 0 | 2 | 0% ❌（后端未实现） |
| 首页实践 | 1 | 0 | 1 | 0% ❌（后端未实现） |
| **总计** | **79** | **30** | **49** | **38%** ⚠️ |

---

## 四、需要创建的API文件

### 1. `frontend/src/api/auth.ts` ❌ 未创建
需要对接的接口：
- POST /api/auth/login - 用户登录
- POST /api/auth/logout - 用户登出

### 2. `frontend/src/api/user.ts` ❌ 未创建
需要对接的接口：
- GET /api/user/current - 获取当前用户信息
- GET /api/user/points/calculate - 获取用户个人积分详情
- GET /api/user/{userId}/profile - 获取用户个人资料
- GET /api/user/profile?name=xxx - 获取用户个人资料（按用户名）
- PUT /api/user/profile - 更新用户资料
- GET /api/user/{userId}/posts - 获取用户发布的帖子
- GET /api/user/{userId}/favorites - 获取用户收藏的帖子
- GET /api/user/{userId}/comments - 获取用户评论列表
- GET /api/user/{userId}/activities - 获取用户参与的活动
- GET /api/user/{userId}/activities/created - 获取用户发布的活动

### 3. `frontend/src/api/post.ts` ❌ 未创建（或扩展practices.ts）
需要对接的接口：
- GET /api/posts/{id} - 获取帖子详情
- POST /api/posts - 创建帖子
- PUT /api/posts/{id} - 更新帖子
- DELETE /api/posts/{id} - 删除帖子
- POST /api/posts/{id}/like - 点赞/取消点赞帖子
- POST /api/posts/{id}/collect - 收藏/取消收藏帖子
- GET /api/posts/recommended-covers - 获取推荐封面列表
- POST /api/posts/draft - 保存草稿
- GET /api/posts/{id}/comments - 获取帖子评论列表
- POST /api/posts/{id}/comments - 发表评论

### 4. `frontend/src/api/comment.ts` ❌ 未创建
需要对接的接口：
- POST /api/comments/{id}/like - 点赞评论
- PUT /api/comments/{id} - 更新评论
- DELETE /api/comments/{id} - 删除评论

### 5. `frontend/src/api/reply.ts` ❌ 未创建
需要对接的接口：
- DELETE /api/replies/{id} - 删除回复

### 6. `frontend/src/api/activity.ts` ❌ 未创建
需要对接的接口：
- GET /api/activities - 获取活动列表
- GET /api/activities/{id} - 获取活动详情
- POST /api/activities - 创建活动
- PUT /api/activities/{id} - 更新活动
- DELETE /api/activities/{id} - 删除活动
- POST /api/activities/{id}/register - 报名活动
- DELETE /api/activities/{id}/register - 取消报名
- GET /api/activities/{id}/registrations - 获取报名用户列表

### 7. `frontend/src/api/honor.ts` ❌ 未创建
需要对接的接口：
- GET /api/honors - 获取荣誉列表
- GET /api/honors/influence - 获取荣誉影响力
- GET /api/honors/top-users - 获取AI使用达人Top用户
- POST /api/honors/{id}/flower - 给荣誉送花

### 8. `frontend/src/api/tool.ts` ❌ 未创建（或扩展home.ts）
需要对接的接口：
- GET /api/tools/{id} - 获取工具详情
- GET /api/tools/{id}/owner - 检查用户是否为工具Owner

### 9. `frontend/src/api/award.ts` ❌ 未创建（或扩展admin.ts）
需要对接的接口：
- GET /api/awards/{id}/rules - 获取奖项规则详情

### 10. `frontend/src/api/agent.ts` ❌ 未创建
需要对接的接口：
- GET /api/agent/featured-post - 获取扶摇Agent应用置顶帖子

### 11. `frontend/src/api/message.ts` ❌ 未创建
需要对接的接口：
- GET /api/messages - 获取消息列表
- PUT /api/messages/{id}/read - 标记消息为已读
- PUT /api/messages/read-all - 全部标记为已读
- DELETE /api/messages/{id} - 删除消息
- GET /api/messages/unread-count - 获取未读消息数量

---

## 五、总结

### ✅ 已对接的模块
1. **首页接口** - 100% ✅
2. **标签接口** - 100% ✅
3. **部门接口** - 100% ✅
4. **贡献者接口** - 100% ✅

### ⚠️ 部分对接的模块
1. **帖子接口** - 25% ⚠️（只对接了列表和最热帖子）
2. **工具接口** - 33% ⚠️（只对接了列表）
3. **奖项接口** - 50% ⚠️（只对接了列表）
4. **管理后台接口** - 65% ⚠️（大部分已对接，但缺少部分配置接口）

### ❌ 完全未对接的模块
1. **用户认证** - 0% ❌
2. **用户管理** - 0% ❌
3. **评论** - 0% ❌
4. **回复** - 0% ❌
5. **活动** - 0% ❌
6. **荣誉** - 0% ❌
7. **扶摇Agent** - 0% ❌
8. **消息** - 0% ❌

### ⚠️ 后端未实现的接口
1. **团队荣誉接口** - 需要后端实现
2. **首页AI优秀实践接口** - 需要后端实现
3. **管理后台AI使用达人管理接口** - 需要后端实现

---

## 六、建议

### 优先级1：核心功能接口
1. **用户认证接口** (`auth.ts`) - 登录、登出
2. **用户管理接口** (`user.ts`) - 用户信息、个人中心
3. **帖子详情接口** (`post.ts`) - 帖子详情、创建、编辑、删除、点赞、收藏
4. **评论接口** (`comment.ts`) - 评论点赞、编辑、删除
5. **消息接口** (`message.ts`) - 消息列表、已读、未读数量

### 优先级2：业务功能接口
1. **活动接口** (`activity.ts`) - 活动列表、详情、报名
2. **荣誉接口** (`honor.ts`) - 荣誉列表、送花
3. **工具详情接口** (`tool.ts`) - 工具详情、Owner检查
4. **Agent接口** (`agent.ts`) - Agent置顶帖子

### 优先级3：辅助功能接口
1. **回复接口** (`reply.ts`) - 删除回复
2. **奖项规则接口** (`award.ts`) - 获取奖项规则详情

### 优先级4：后端需要实现的接口
1. **团队荣誉接口** - 后端需要创建 `TeamAwardController`
2. **首页AI优秀实践接口** - 后端需要在 `HomeController` 中添加
3. **管理后台AI使用达人管理接口** - 后端需要在 `AdminController` 中添加

---

## 七、未对接原因分析

### 主要原因：前端页面使用模拟数据

前端页面UI已经完成，但很多功能还在使用**模拟数据（Mock Data）**或**localStorage**，没有真正调用后端API。

### 具体表现：

#### 1. 帖子相关功能
- **PostDetailView.vue**：
  - ❌ `loadPostDetail()` - 使用模拟数据，注释：`// 这里应该调用API获取帖子详情`
  - ❌ `handleLike()` - 直接修改本地状态，注释：`// 这里应该调用API点赞`
  - ❌ `handleCollect()` - 使用localStorage存储，没有调用API
  - ❌ `loadComments()` - 使用硬编码的模拟评论数据
  - ❌ `publishComment()` - 使用localStorage存储评论

- **PostCreateView.vue**：
  - ❌ `handlePublish()` - 模拟API调用延迟，注释：`// 这里应该调用API发布帖子`

#### 2. 活动相关功能
- **ActivityDetailView.vue**：
  - ❌ `loadActivity()` - 从localStorage读取，注释：`// 这里应该调用API获取活动数据`
  - ❌ `handleRegister()` - 使用localStorage存储报名信息，注释：`// 这里应该调用API报名`

- **ActivityCreateView.vue**：
  - ❌ 活动创建功能使用localStorage存储

#### 3. 用户相关功能
- **ProfileView.vue**：
  - ❌ `loadUserProfile()` - 使用mock函数，注释：`// 这里应该调用API获取用户信息`
  - ❌ `loadUserPosts()` - 使用硬编码的模拟帖子数据
  - ❌ `loadUserFavorites()` - 使用localStorage读取收藏
  - ❌ `loadUserComments()` - 使用硬编码的模拟评论数据
  - ❌ `loadRegisteredActivities()` - 使用localStorage读取报名活动

#### 4. 消息相关功能
- **MessageListView.vue**：
  - ❌ 使用 `utils/message.ts`，但该文件完全基于**localStorage**存储
  - ❌ 没有调用任何后端API接口

#### 5. 其他功能
- **AgentView.vue**：
  - ❌ `checkAgentOwner()` - 从localStorage读取，注释：`// 模拟API调用：GET /api/tools/-1/owner`
  - ❌ 置顶帖子使用localStorage存储

- **ToolsView.vue**：
  - ❌ Owner权限检查使用localStorage
  - ❌ 活动数据使用模拟数据

- **UsersView.vue**：
  - ❌ 荣誉列表使用硬编码的模拟数据，注释：`// --- 模拟数据 (HonorList 保持不变) ---`

### 解决方案：

1. **创建缺失的API文件**（auth.ts, user.ts, post.ts, comment.ts, reply.ts, activity.ts, honor.ts, message.ts, agent.ts, tool.ts, award.ts）
2. **替换所有模拟数据调用**为真实API调用
3. **移除localStorage存储逻辑**，改为API调用
4. **更新Vue组件**，使用新的API函数

### 影响：

- ✅ **UI已完成**：所有页面的界面和交互都已实现
- ❌ **功能未对接**：大部分功能还在使用模拟数据，无法与后端交互
- ⚠️ **数据不持久**：使用localStorage的数据在刷新或切换设备后会丢失
- ⚠️ **无法多用户**：模拟数据无法支持多用户场景
